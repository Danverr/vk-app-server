[Гайд по установке](https://vk.com/away.php?utf=1&to=http%3A%2F%2Fvk.com%2F%40bless_mt19937-gaid-po-ustanovke-servera)

# Содержание
1. [Коды возврата](#коды-возврата)
1. [statAccess](#stataccess)
    * [GET /statAccess/](#get-stataccess)
    * [POST /statAccess/](#post-stataccess)
    * [PUT /statAccess/](#put-stataccess)
    * [DELETE /statAccess/](#delete-stataccess)
1. [entries](#entries)
    * [GET /entries/](#get-entries)
1. [VK API](#vk-api)
    * [GET /vk/users/](#get-vkusers)

# Коды возврата
* **200 OK** - Ответ на успешный GET запрос
* **201 Created** - Ответ на успешный POST запрос
* **204 No Content** - Ответ на успешный запрос, который не будет возвращать тело (DELETE или PUT)
* **400 Bad Request** - Ошибка в запросе: неверный URL для таблицы, указаны не все параметры, запрос к БД не выполнен и т.д.
* **401 Unauthorized** - Недействительны данные аутентификации в заголовке "VK-API-SIGN"
* **404 Not found** - Запрашивается несуществующий ресурс. Например, указана неверная таблица
* **429 Too Many Requests** - Запрос отклоняется из-за ограничения скорости
* **500 Internal Server Error** - Любая внутренняя ошибка сервера. Например, ошибка при инициализации соединения с БД

# statAccess

## GET /statAccess/
Возвращает id пользователей, к которым есть доступ
#### Параметры
* **userId** *(обязательно)* - VK ID пользователя
#### Ответ
Массив строк с id пользователей
#### Пример
```json
[
    "270029019",
    "505643430"
]
```

## POST /statAccess/
Создает новую запись пользователя
#### Параметры
* **userId** *(обязательно)* - VK ID пользователя
* **mood** *(обязательно)* - Настоение пользователя (от 1 до 5)
* **stress** *(обязательно)* - Стресс пользователя (от 1 до 5)
* **anxiety** *(обязательно)* - Тревожность пользователя (от 1 до 5)
* **isPublic** *(обязательно)* - Доступна ли запись друзьям (0 либо 1)
* **title** - Заголовок записи (строка с максимальной длиной 255 символов)
* **note** - Текст записи (строка с максимальной длиной 65 535 символов)
#### Ответ
В случае успеха вернет строку ```201 Created```

## PUT /statAccess/
Редактирует запись пользователя
#### Параметры
* **entryId** *(обязательно)* - ID записи
* **mood** - Настоение пользователя (от 1 до 5)
* **stress** - Стресс пользователя (от 1 до 5)
* **anxiety** - Тревожность пользователя (от 1 до 5)
* **isPublic** - Доступна ли запись друзьям (0 либо 1)
* **title** - Заголовок записи (строка с максимальной длиной 255 символов)
* **note** - Текст записи (строка с максимальной длиной 65 535 символов)
#### Ответ
В случае успеха вернет пустой ответ

## DELETE /statAccess/
Удаляет запись пользователя
#### Параметры
* **entryId** *(обязательно)* - ID записи
#### Ответ
В случае успеха вернет пустой ответ

# entries

## GET /entries/
Возвращает записи пользователя
#### Параметры
* **userId** *(обязательно)* - VK ID пользователя
* **date** - Дата по стандарту UTC в формате YYYY-MM-DD
#### Ответ
Массив объектов с полями:
* **entryId** - ID записи
* **userId** - ID пользователя
* **mood** - Настроение от 1 до 5
* **stress** - Стресс от 1 до 5
* **anxiety** - Тревожность от 1 до 5
* **title** - Заголовок записи
* **note** - Текст записи
* **isPublic** - Доступно ли друзьям
* **date** - Дата по стандарту UTC в формате YYYY-MM-DD HH:MM:SS
#### Пример
```json
[
    {
        "entryId": "1",
        "userId": "331480448",
        "mood": "1",
        "stress": "2",
        "anxiety": "3",
        "title": "asaasdar",
        "note": "asdafasfsahsifjvksaor",
        "isPublic": "0",
        "date": "2020-05-05 00:00:00"
    }
]
```

# VK API

## GET /vk/users/
 Возвращает общие сведения о пользователях
#### Параметры
* **userIds[]** *(обязательно)* - Массив VK ID пользователей
#### Ответ
Массив объектов с полями:
* **id** - ID пользователя
* **first_name** - Имя
* **last_name** - Фамилия
* **is_closed** - Cкрыт ли профиль пользователя настройками приватности.
* **can_access_closed** - Может ли текущий пользователь видеть профиль при is_closed = 1 (например, он есть в друзьях)
* **photo_50** - URL 50x50 px фотографии пользователя
#### Пример
```json
[
    {
        "id": 331480448,
        "first_name": "Даниил",
        "last_name": "Маряхин",
        "is_closed": false,
        "can_access_closed": true,
        "photo_50": "https://sun9-44.userapi.com/c857416/v857416969/1a5de7/WRpCWJyzQ8A.jpg?ava=1"
    }
]
```
